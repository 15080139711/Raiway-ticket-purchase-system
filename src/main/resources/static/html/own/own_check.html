<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>手机核验</title>
    <link rel="stylesheet" href="../../css/own_check.css">
</head>
<body>
<div id="content">
    <div class="content_tit">
        <div>手机核验</div>
    </div>
    <div class="content_view1">
        <div class="con_view_rows">
            <div class="view_rows_l">
                <span>*</span>
                原手机号：
            </div>
            <div class="view_rows_r">
                {{phone}} <span class="span4">已通过核验</span>
            </div>
        </div>
        <div class="con_view_rows">
            <div class="view_rows_l">
                <span>*</span>
                新手机号：
            </div>
            <div class="view_rows_r">
                <input class="new_phone" type="text" :value="phone">
            </div>
        </div>
    </div>
    <div class="content_view2">
        <div class="con_view_rows">
            <div class="view_rows_l">
                <span>*</span>
                登录密码：
            </div>
            <div class="view_rows_r">
                <input class="password" type="password" value="123456789"> <span class="span5">正确输入密码才能修改密保</span>
            </div>
        </div>
    </div>
    <div class="content_view3">
        <div class="con_view_rows">
            <a class="first_a" href="javascript:;">取消</a>
            <a class="second_a" href="javascript:;">确认</a>
        </div>
    </div>
</div>

<script src="../../js/jquery-3.4.1.min.js"></script>
<script src="../../js/vue.min.js"></script>
<script>
    $(function () {
        //缓存用户读取cookie
        var userid;
        var username;

        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i].trim();
                if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
            }
            return "";
        }

        if (getCookie("cookie_userid") != null) {
            userid = getCookie("cookie_userid");
        }
        if (getCookie("cookie_username") != null) {
            username = getCookie("cookie_username");
        }

        //1.ajax部分：获取用户的手机号和密码
        var j = new Object();
        j.id = userid;
        $.ajax({
            url:"http://localhost:8080/api/user/getInfo",
            type:"post",
            dataType:"json",
            contentType:'application/json;charset=UTF-8',
            data:JSON.stringify(j),
            success:function (data) {
                // alert(data.phone);
                vm.phone = data.phone;
            }
        })

        //1.vue部分：绑定用户手机号
        var vm = new Vue({
            el:"#content",
            data:{
                phone:{}
            }
        })

        //2.ajax部分：
        //测试取input中的值
        $(".second_a").click(function () {
          var a = $(".new_phone").val();
          alert(a);
          var b = $(".password").val();
          alert(b);

        })
    })
</script>
</body>
</html>